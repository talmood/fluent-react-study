# 7장 리액트 동시성

## 7.1 동기식 렌더링의 문제

- 동기식 렌더링의 문제 : 메인 스레드를 가로막아서 사용자 경험이 저하됨, 컴포넌트가 많고 업데이트가 비번하며 복잡한 에플리케이션에서 더~ 말썽. 문제가 발생하면 UI 반응이 느려지거나 응답을 하지 않아 사용자가 불편을 겪게 됨
- 해결법 -> 여러 업데이트를 일괄처리하여 메인 스레드에서 수행되는 작업을 최소화하는것
- -> 이것도 한계가 있음..



- 리액트는 **동시성 렌더링**을 사용해 업데이트 작업의 중요도와 긴급도에 따라 우선순위를 정하고, 중요한 업데이트가 덜 중요한 업데이트 때문에 가로 막히지 않도록 함
- CPU를 많이 소모하는 렌더링 작업은 덜 중요한 작업으로 간주되고 사용자 상호작용이나 애니메이션같이 더 중요한 작업이 우선적으로 처리
- 동시성 렌더링 기능 덕분에 타임슬라이싱 : 렌더링 프로세스를 더 작은 덩어리로 분리해 점진적으로 처리하는 기법도 가능


## 7.2 파이버 다시보기
- 파이버 재조정자는 동시성 레더링을 가능케 하는 리액트 핵심 메커니즘 ! 리액트 16에 도입됨
- 렌더링 프로세스를 파이버라고 하는 더 작고 관리하기 쉬운 작업단위로 분할해 처리함
- 리액트는 파이버를 활용해서 렌더링 작업을 일시적으로 중지하거나 재개하거나 우선순위를 설정해 중요도에 따라 업데이트를 지연하거나 예약함
- 어플리케이션 응답성 향상, 덜 중요한 작업이 더 중요한 업데이트를 가로막는일 방지 함


## 7.3 업데이트 예약과 지연
- 업데이트를 예약하고 지연하는 기능
- 스케줄러와 여러 효율적인 API 에 의존해 구현
- setTimeout, MessageChannel 등의 브라우저 API를 사용해 작업을 예약, 관리하는 시스템


## 7.4 더 깊이 들어가기
- 리액트에서 업데이트를  예약


### 7.4.1 스케줄러
- 해야할 업데이트 작업이 있을 때 `setTimeout.messageChannel` 등의 브라우저 API를 사용해 작업을 예약, 관리하는 시스템

## 렌더 레인
- 렌더레인은 리액트의 예약 시스템에서 중요한 요소로 , 작업의 렌더링과 우선순위 관리를 효율화 합니다.
- 레인 ㅣ 우선순위 수준을 나타내는 단위
- 렌더레인의 개념은 리액트 18에 

### 렌더 레인 작동 방식

1. 업데이트 수집 
2. 레인 처리 
3. 커밋 단계
4. 반복

1. 업데이트의 콘텍스트 확인
   - 업데이트가 발생한 콘텍스트 평가
2. 콘텍스트에 따라 우선순위 추정
3. 우선순위 재정의가 있는지 확인
   - useTransition, useDeferredValue 를 사용하여 업데이트 우선순위를 명시적으로 설정한 경우, 추정 순위보다 명시적 우선순위를 사용한다.
4. 올바른 레인에 업데이트 할당
   - 비트마스크를 사용하여 레인에 업데이트 할당 



## useTransition
- 컴포넌트에서 상태 업데이트 우선순위를 관리하고 우선순위가 높은 업데이트로 인해 UI 가 응답하지 않는 것을 방지하는 강력한 리액트 훅

- useTransition 에서 반환된 startTransition 함수로 감싸진 모든 업데이트는 트랜지션레인에 들어감
- 트랜지션 레인은 Sync 레인보다 우선순위가 낮기 때문에 ...................

isPending
startTransition


## useDeferredValue

